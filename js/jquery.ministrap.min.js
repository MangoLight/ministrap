/* ==========================================================
 * Ministrap 0.2
 * http://mangolight.github.com/ministrap
 * ==========================================================
 * Copyright 2013 MangoLight / http://www.mangolight.com
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */
(function(a){a(function(){a(document).ready(function(){a(".menu").css("cursor","pointer").click(function(){680>a(window).width()?"block"==a(".menu li a").css("display")?a(".menu li a").hide():a(".menu li a").show():a(".menu li a").show()});a(window).resize(function(){680>a(window).width()?a(".menu li a").hide():a(".menu li a").show()});a(".tabs").miniTabs();a(".nav").each(function(){var f=parseInt(a("body").css("padding-top"))+15;a(this).attr("data-offset-top")&&(f=parseInt(a(this).attr("data-offset-top"))); a(this).miniNav({offset_top:f})});a("a[data-dropdown],select.dropdown").each(function(){var f=a(this).attr("data-scroll");f&&("true"==f?f=!0:f=!1);var g=a(this).attr("data-columns");g&&(g=parseInt(g));a(this).miniDropdown({width:a(this).attr("data-width"),scroll:f,columns:g})});a(".carousel").miniCarousel();a(".to-top").miniToTop();a("[data-modal]").miniModal()})})})(jQuery); (function(a){a.fn.miniModal=function(f){function g(b,e){b.bind("open",function(){b.addClass("opened");e.stop().fadeIn("fast",function(){b.css({top:0,left:a(window).width()/2-b.width()/2,opacity:0}).show().stop().animate({top:70,opacity:1},function(){d(b)})}).click(function(){c(b,e)})});a(window).resize(function(){b.css({left:a(window).width()/2-b.width()/2});d(b)})}function c(b,c){b.stop().animate({top:-50,opacity:0},"fast",function(){a(this).hide();a(this).hasClass("ajax")&&a(this).remove();c.stop().fadeOut()})} function d(b){void 0===b.attr("data-fixed-top")&&b.attr("data-fixed-top",parseInt(b.css("top")));b.height()+parseInt(b.attr("data-fixed-top"))>a(window).height()?b.css({position:"absolute",top:a(window).scrollTop()+parseInt(b.attr("data-fixed-top"))}):b.css({position:"fixed",top:parseInt(b.attr("data-fixed-top"))})}a.extend({background:!0},f);return this.not(".miniModal").each(function(){a(this).addClass("miniModal");var b=a(this),e=b.attr("data-modal"),d=a("<div>").addClass("modal_bg").appendTo("body"); 0==e.indexOf("#")||0==e.indexOf(".")?(e=a(e).appendTo("body"),0<e.length&&(g(e,d),b.click(function(){e.trigger("open");return!1}),e.bind("close",function(){c(e,d)}),e.find(".close").click(function(){c(e,d)}))):b.click(function(){a.ajax({url:b.attr("href"),success:function(e){var h=a("<div>").addClass("modal ajax").appendTo("body");""!=b.attr("data-title")&&a("<div>").addClass("modal-title").html("<h5>"+b.attr("data-title")+'</h5> <div class="close">&times;</div>').appendTo(h);a("<div>").addClass("modal-content").html(e).appendTo(h); g(h,d);h.trigger("open");h.bind("close",function(){c(h,d)});h.find(".close").click(function(){c(h,d)})}});return!1})})}})(jQuery); (function(a){a.fn.miniCarousel=function(f){function g(a,c){a.find(".carousel-indicators div").removeClass("active");a.find(".carousel-indicators div").eq(c).addClass("active")}function c(b,c){b.each(function(){a(this).css({width:c.width()})})}var d=a.extend({arrows:!0,indicators:!0,auto:!0,delay:5E3},f);return this.each(function(){var b=a(this),e=a(this).find("ul").eq(0),f=a(this).find("ul li");e.css({width:"999999px"});c(f,b);d.arrows&&(a("<div>").html("&lsaquo;").addClass("carousel-control left").appendTo(b).click(function(){b.trigger("slidePrev")}), a("<div>").html("&rsaquo;").addClass("carousel-control right").appendTo(b).click(function(){b.trigger("slideNext")}));if(d.indicators){for(var l=a("<div>").addClass("carousel-indicators").appendTo(b),h=0;h<f.length;h++)a("<div>").click(function(){b.trigger("slideTo",a(this).attr("data-slide"))}).appendTo(l).attr("data-slide",h);g(b,0)}if(d.auto){var m=window.setInterval(function(){b.hasClass("hover")||b.trigger("slideNext")},d.delay);b.hover(function(){b.addClass("hover");clearInterval(m)},function(){b.removeClass("hover"); m=window.setInterval(function(){b.hasClass("hover")||b.trigger("slideNext")},d.delay)})}a(window).resize(function(){c(f,b);e.stop().css({"margin-left":0});d.indicators&&g(b,0)});b.bind("slideTo",function(a,c){0<b.find("ul li").eq(c).length&&0<=c&&e.animate({"margin-left":-1*c*b.width()},function(){d.indicators&&g(b,c)})});b.bind("slidePrev",function(){var a=parseInt(-1*parseInt(b.find("ul").css("margin-left").replace("px"))/b.width()),c=b.find("li").length;0===a?a=c-1:a--;b.trigger("slideTo",a)}); b.bind("slideNext",function(){var a=parseInt(-1*parseInt(b.find("ul").css("margin-left").replace("px"))/b.width()),c=b.find("li").length;a==c-1?a=0:a++;b.trigger("slideTo",a)})})}})(jQuery); (function(a){a.fn.miniToTop=function(){function f(g){a(document).scrollTop()>1.5*a(window).height()?g.stop().show().animate({opacity:0.75}):g.stop().animate({opacity:0},function(){a(this).hide()})}return this.each(function(){var g=a(this);g.html("&uarr;").hide().click(function(){a("html,body").stop().animate({scrollTop:0},300)});a(document).scroll(function(){f(g)});a(window).resize(function(){f(g)});f(g)})}})(jQuery); (function(a){a.fn.miniTabs=function(f){function g(c){try{a(c.find("li.active a").attr("href")).show()}catch(d){}}return this.each(function(){var c=a(this);c.show();c.next(".tabs-content").children().hide();c.find("li a").click(function(){try{a(c.find("li.active a").attr("href")).hide()}catch(d){}c.find("li.active").removeClass("active");a(this).parent().addClass("active");g(c);return!1});c.find("li").click(function(){a(this).find("a").click();return!1});g(c)})}})(jQuery); (function(a){a.fn.miniNav=function(f){function g(b){var c=null;b.find("li a").each(function(){try{a(a(this).attr("href")).offset().top<=a(document).scrollTop()+100&&(c=a(this))}catch(b){}});c||(c=b.find("li a").eq(0));b.find("li.active").removeClass("active");c.parent().addClass("active")}function c(b){b.css({position:"static",top:"auto",width:"auto",height:"auto"}).removeClass("fixed-done");if(680<=a(window).width())if(b.attr("data-top",b.offset().top-parseInt(b.css("margin-top"))).css({position:"fixed", top:b.offset().top,width:b.width(),height:b.height()}).addClass("fixed-done"),a(document).scrollTop()<parseInt(b.attr("data-top"))-d.offset_top)b.css({top:parseInt(b.attr("data-top"))-a(document).scrollTop()});else{var c;try{c=a(b.attr("data-fixed-end")).offset().top+a(b.attr("data-fixed-end")).height()}catch(g){}a(document).scrollTop()+b.height()+d.offset_top+parseInt(b.css("margin-bottom"))>c?b.css({top:c-a(document).scrollTop()-b.height()-parseInt(b.css("margin-bottom"))}):b.css({top:d.offset_top})}} var d=a.extend({offset_top:15},f);return this.each(function(){var b=a(this);a(window).scroll(function(){c(b);g(b)});a(window).resize(function(){c(b);g(b)});c(b)})}})(jQuery); (function(a){a.fn.miniDropdown=function(f){function g(c,d){var b=a(c.attr("data-dropdown"));b.hide();c.removeClass("dropdown-opened");d.call(c,b)}return this.each(function(){var c=a(this);if(c.is("select")){var d=a.extend({onOpen:function(){},onClose:function(){},width:"parent",scroll:!0,columns:3},f),b=(new Date).getTime()+parseInt(999999999*Math.random(99999999)),e=a("<ul>").addClass("dropdown").insertAfter("body").attr("id","dropdown_"+b);a(this).find("option").each(function(){var b=a("<li>"); a("<a>").attr("href","#").attr("data-value",a(this).val()).text(a(this).text()).attr("style","border-radius:0;").appendTo(b);c.val()==a(this).val()&&b.addClass("active");e.append(b)});var n=e.width()+30;1<d.columns&&e.addClass("large");var l=a("<div>").addClass("select").text(c.find('option[value="'+c.val()+'"]').text()).insertAfter(a(this)).attr("data-dropdown","#dropdown_"+b).css({width:n});e.find("li").css({width:100/d.columns+"%"});l.miniDropdown({onSelect:function(b){c.val(a(b).attr("data-value")); c.change();a(b).parent().parent().find(".active").removeClass("active");a(b).parent().addClass("active")},onOpen:d.onOpen,onClose:d.onClose,width:d.width,scroll:d.scroll,columns:d.columns});c.hide();e.insertAfter(c);c.change(function(){l.text(c.find("option:selected").text())})}else d=a.extend({onSelect:function(){},onOpen:function(){},onClose:function(){},width:180,scroll:!1,columns:1},f),1==a(c.attr("data-dropdown")).length&&(e=a(c.attr("data-dropdown")),c.click(function(){if(c.hasClass("dropdown-opened"))g(c, d.onClose);else{a(".dropdown-opened").each(function(){g(a(this),d.onClose)});var b=c.width()+parseInt(c.css("padding-left"))+parseInt(c.css("padding-right")),f=d.width;"parent"==f?f=b:"auto"==f&&(f=e.width());var f=f*d.columns,k=c.offset().top+c.height()+parseInt(c.css("padding-top"))+parseInt(c.css("padding-bottom")),k=d.scroll?k+4:k+13;e.css({position:"absolute",top:k,left:c.offset().left+b/2-f/2+1,width:f});d.scroll&&e.css({"max-height":200,"overflow-y":"scroll","overflow-x":"hidden",width:e.width()}).addClass("scroll"); 1<d.columns&&e.addClass("large");e.find("li").css({width:100/d.columns+"%"});e.height()+k<a(document).scrollTop()+a(window).height()?e.removeClass("arrow-bottom").addClass("arrow-top"):(k=c.offset().top-e.height()-parseInt(c.css("padding-top"))-parseInt(c.css("padding-bottom")),k=d.scroll?k+6:k-4,e.css({top:k}).removeClass("arrow-top").addClass("arrow-bottom"));e.show();0>e.offset().left&&e.css({left:0});c.addClass("dropdown-opened");d.onOpen.call(c,e);a(window).resize(function(){c.hasClass("dropdown-opened")&& g(c,d.onClose)})}return!1}),e.find("a").click(function(){d.onSelect.call(c,a(this));g(c,d.onClose);if("#"==a(this).attr("href"))return!1}))})}})(jQuery);
