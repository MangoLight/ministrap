/* ==========================================================
 * Ministrap 0.5
 * http://www.mangolight.com/labs/ministrap
 * ==========================================================
 * Copyright 2014 MangoLight / http://www.mangolight.com
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */
(function(a){a(function(){a(document).ready(function(){a(".tabs").miniTabs();a(".nav").each(function(){var f=parseInt(a("body").css("padding-top"))+15;a(this).attr("data-offset-top")&&(f=parseInt(a(this).attr("data-offset-top")));a(this).miniNav({offset_top:f})});a("a[data-dropdown],select.dropdown").each(function(){var f=a(this).attr("data-scroll");f&&("true"==f?f=!0:f=!1);var g=a(this).attr("data-columns");g&&(g=parseInt(g));a(this).miniDropdown({width:a(this).attr("data-width"),scroll:f,columns:g})});
a(".carousel").each(function(){var f=a(this).attr("data-arrows");f&&("true"==f?f=!0:f=!1);var g=a(this).attr("data-indicators");g&&("true"==g?g=!0:g=!1);var c=a(this).attr("data-auto");c&&("true"==c?c=!0:c=!1);var e=a(this).attr("data-delay");e&&(e=parseInt(e));var b=a(this).attr("data-stoponhover");b&&("true"==b?b=!0:b=!1);a(this).miniCarousel({mode:a(this).attr("data-mode"),arrows:f,indicators:g,auto:c,delay:e,stoponhover:b})});a(".to-top").miniToTop();a("[data-modal]").miniModal();a("[data-hint]").miniHint();
a("body").miniMobileMenu()})})})(jQuery);
(function(a){a.fn.miniModal=function(f){function g(b,d){b.bind("open",function(){b.addClass("opened");d.stop().appendTo("body").fadeIn("fast",function(){b.appendTo("body").css({position:"fixed",top:0,left:a(window).width()/2-b.width()/2,opacity:0}).show().stop().animate({top:70,opacity:1},function(){e(b)})}).click(function(){c(b,d)})});a(window).resize(function(){b.css({left:a(window).width()/2-b.width()/2});e(b)});a("body").keyup(function(e){27==e.keyCode&&b.is(a(".modal.opened").last())&&c(b,d)})}
function c(b,d){b.stop().animate({top:-50,opacity:0},"fast",function(){a(this).hide().removeClass("opened");a(this).hasClass("ajax")&&a(this).remove();d.stop().fadeOut("fast")})}function e(b){void 0===b.attr("data-fixed-top")&&b.attr("data-fixed-top",parseInt(b.css("top")));b.height()+parseInt(b.attr("data-fixed-top"))>a(window).height()?b.css({position:"absolute",top:a(window).scrollTop()+parseInt(b.attr("data-fixed-top"))}):b.css({position:"fixed",top:parseInt(b.attr("data-fixed-top"))})}a.extend({background:!0},
f);return this.not(".miniModal").each(function(){a(this).addClass("miniModal");var b=a(this),d=b.attr("data-modal"),e=a("<div>").addClass("modal-bg").appendTo("body");0==d.indexOf("#")||0==d.indexOf(".")?(d=a(d).appendTo("body"),0<d.length&&(g(d,e),b.click(function(){d.trigger("open");return!1}),d.bind("close",function(){c(d,e)}),d.find(".close").click(function(){c(d,e)}))):b.click(function(){a.ajax({url:b.attr("href"),success:function(d){var f=a("<div>").addClass("modal ajax").appendTo("body");""!=
b.attr("data-title")&&a("<div>").addClass("modal-title").html("<h5>"+b.attr("data-title")+'</h5> <div class="close">&times;</div>').appendTo(f);a("<div>").addClass("modal-content").html(d).appendTo(f);g(f,e);f.trigger("open");f.bind("close",function(){c(f,e)});f.find(".close").click(function(){c(f,e)})}});return!1})})}})(jQuery);
(function(a){a.fn.miniCarousel=function(f){function g(a,d){a.find(".carousel-indicators div").removeClass("active");a.find(".carousel-indicators div").eq(d).addClass("active")}function c(b,d){b.each(function(){a(this).css({width:d.width()})})}var e=a.extend({mode:"slide",arrows:!0,indicators:!0,auto:!0,delay:5E3,stoponhover:!0},f);return this.each(function(){var b=a(this),d=a(this).find("ul").eq(0),f=a(this).find("ul li");d.css({width:"999999px"}).attr("data-current-slide",0);"fade"==e.mode&&f.css({position:"absolute",
opacity:0}).eq(0).css({opacity:1,position:"relative"});c(f,b);var k;e.arrows&&(a("<div>").html("&lsaquo;").addClass("carousel-control left").appendTo(b).click(function(){b.trigger("slidePrev")}),a("<div>").html("&rsaquo;").addClass("carousel-control right").appendTo(b).click(function(){b.trigger("slideNext")}));if(e.indicators){for(var l=a("<div>").addClass("carousel-indicators").appendTo(b),m=0;m<f.length;m++)a("<div>").click(function(){b.trigger("slideTo",a(this).attr("data-slide"))}).appendTo(l).attr("data-slide",
m);g(b,0)}e.auto&&(k=window.setInterval(function(){b.hasClass("hover")||b.trigger("slideNext")},e.delay),e.stoponhover&&b.hover(function(){b.addClass("hover");clearInterval(k)},function(){b.removeClass("hover");k=window.setInterval(function(){b.hasClass("hover")||b.trigger("slideNext")},e.delay)}));b.miniSwipe({swipeLeft:function(){b.trigger("slideNext").trigger("stop")},swipeRight:function(){b.trigger("slidePrev").trigger("stop")}});a(window).resize(function(){c(f,b);d.stop().css({"margin-left":0});
e.indicators&&"slide"==e.mode&&(d.attr("data-current-slide",0),g(b,0))});b.bind("stop",function(){clearInterval(k)});b.bind("slideTo",function(a,c){0<b.find("li").eq(c).length&&0<=c&&(d.attr("data-current-slide",c),e.indicators&&g(b,c),"slide"==e.mode&&d.stop().animate({"margin-left":-1*c*b.width()}),"fade"==e.mode&&f.stop().animate({opacity:0}).eq(c).stop().animate({opacity:1}))});b.bind("slidePrev",function(){var a=d.attr("data-current-slide"),c=b.find("li").length;0==a?a=c-1:a--;b.trigger("slideTo",
a)});b.bind("slideNext",function(){var a=d.attr("data-current-slide"),c=b.find("li").length;a==c-1?a=0:a++;b.trigger("slideTo",a)})})}})(jQuery);
(function(a){a.fn.miniToTop=function(){function f(g){a(document).scrollTop()>1.5*a(window).height()?g.stop().show().animate({opacity:.75}):g.stop().animate({opacity:0},function(){a(this).hide()})}return this.each(function(){var g=a(this);g.html("&uarr;").hide().click(function(){a("html,body").stop().animate({scrollTop:0},300)});a(document).scroll(function(){f(g)});a(window).resize(function(){f(g)});f(g)})}})(jQuery);
(function(a){a.fn.miniTabs=function(f){function g(c){try{a(c.find("li.active a").attr("href")).show(),a(window).trigger("resize")}catch(e){}}return this.each(function(){var c=a(this);c.show();c.next(".tabs-content").children().hide();c.find("li a").click(function(){try{a(c.find("li.active a").attr("href")).hide()}catch(e){}c.find("li.active").removeClass("active");a(this).parent().addClass("active");g(c);return!1});c.find("li").click(function(){a(this).find("a").click();return!1});g(c)})}})(jQuery);
(function(a){a.fn.miniNav=function(f){function g(b){var d=null;b.find("li a").each(function(){try{a(a(this).attr("href")).offset().top<=a(document).scrollTop()+100&&(d=a(this))}catch(b){}});d||(d=b.find("li a").eq(0));b.find("li.active").removeClass("active");d.parent().addClass("active")}function c(b){b.css({position:"static",top:"auto",width:"auto",height:"auto"}).removeClass("fixed-done");if(665<=a(window).width())if(b.attr("data-top",b.offset().top-parseInt(b.css("margin-top"))).css({position:"fixed",
top:b.offset().top,width:b.width(),height:b.height()}).addClass("fixed-done"),a(document).scrollTop()<parseInt(b.attr("data-top"))-e.offset_top)b.css({top:parseInt(b.attr("data-top"))-a(document).scrollTop()});else{var d;try{d=a(b.attr("data-fixed-end")).offset().top+a(b.attr("data-fixed-end")).height()}catch(c){}a(document).scrollTop()+b.height()+e.offset_top+parseInt(b.css("margin-bottom"))>d?b.css({top:d-a(document).scrollTop()-b.height()-parseInt(b.css("margin-bottom"))}):b.css({top:e.offset_top})}}
var e=a.extend({offset_top:15},f);return this.each(function(){var b=a(this);a(window).scroll(function(){c(b);g(b)});a(window).resize(function(){c(b);g(b)});c(b)})}})(jQuery);
(function(a){a.fn.miniDropdown=function(f){function g(c,e){var b=a(c.attr("data-dropdown"));b.hide();c.removeClass("dropdown-opened");e.call(c,b)}return this.each(function(){var c=a(this);if(c.is("select")){var e=a.extend({onOpen:function(){},onClose:function(){},width:"parent",scroll:!0,columns:3},f),b=(new Date).getTime()+parseInt(999999999*Math.random(99999999)),d=a("<ul>").addClass("dropdown").insertAfter("body").attr("id","dropdown_"+b);a(this).find("option").each(function(){var b=a("<li>");
a("<a>").attr("href","#").attr("data-value",a(this).val()).text(a(this).text()).attr("style","border-radius:0;").appendTo(b);c.val()==a(this).val()&&b.addClass("active");d.append(b)});var h=d.width()+30;1<e.columns&&d.addClass("large");var k=a("<div>").addClass("select").text(c.find('option[value="'+c.val()+'"]').text()).insertAfter(a(this)).attr("data-dropdown","#dropdown_"+b).css({width:h});d.find("li").css({width:100/e.columns+"%"});k.miniDropdown({onSelect:function(b){c.val(a(b).attr("data-value"));
c.change();a(b).parent().parent().find(".active").removeClass("active");a(b).parent().addClass("active")},onOpen:e.onOpen,onClose:e.onClose,width:e.width,scroll:e.scroll,columns:e.columns});c.hide();d.insertAfter(c);c.change(function(){k.text(c.find("option:selected").text())})}else e=a.extend({onSelect:function(){},onOpen:function(){},onClose:function(){},width:180,scroll:!1,columns:1},f),1==a(c.attr("data-dropdown")).length&&(d=a(c.attr("data-dropdown")),c.click(function(){if(c.hasClass("dropdown-opened"))g(c,
e.onClose);else{a(".dropdown-opened").each(function(){g(a(this),e.onClose)});var b=c.width()+parseInt(c.css("padding-left"))+parseInt(c.css("padding-right")),f=e.width;"parent"==f?f=b:"auto"==f&&(f=d.width());var f=f*e.columns,h=c.offset().top+c.height()+parseInt(c.css("padding-top"))+parseInt(c.css("padding-bottom")),h=e.scroll?h+4:h+13;d.css({position:"absolute",top:h,left:c.offset().left+b/2-f/2+1,width:f});e.scroll&&d.css({"max-height":200,"overflow-y":"scroll","overflow-x":"hidden",width:d.width()}).addClass("scroll");
1<e.columns&&d.addClass("large");d.find("li").css({width:100/e.columns+"%"});d.height()+h<a(document).scrollTop()+a(window).height()?d.removeClass("arrow-bottom").addClass("arrow-top"):(h=c.offset().top-d.height()-parseInt(c.css("padding-top"))-parseInt(c.css("padding-bottom")),h=e.scroll?h+6:h-4,d.css({top:h}).removeClass("arrow-top").addClass("arrow-bottom"));d.show();0>d.offset().left&&d.css({left:0});c.addClass("dropdown-opened");e.onOpen.call(c,d);a(window).resize(function(){c.hasClass("dropdown-opened")&&
g(c,e.onClose)})}return!1}),d.find("a").click(function(){e.onSelect.call(c,a(this));g(c,e.onClose);if("#"==a(this).attr("href"))return!1}))})}})(jQuery);
(function(a){a.fn.miniHint=function(f){return this.each(function(){function f(){d.html(b.attr("data-hint"));var g=0,k=0,l=b.attr("data-hint-position");"left"==l||"right"==l?(g=b.offset().top+c(b)/2-c(d)/2-parseInt(d.css("margin-top")),k="left"==l?b.offset().left-e(d)-10:b.offset().left+e(b)+10):(k=b.offset().left+e(b)/2-e(d)/2,"bottom"==l?g=b.offset().top+c(b)-parseInt(d.css("margin-top"))+10:(g=b.offset().top-(d.height()+parseInt(d.css("padding-top"))+parseInt(d.css("padding-bottom")))-parseInt(d.css("margin-top"))-
10,l="top"));d.addClass("minihint-"+l);a("<div>").addClass("minihint-arrow-"+l+"-border").appendTo(d);var m=a("<div>").addClass("minihint-arrow-"+l);m.css("border-"+l+"-color",d.css("background-color"));m.appendTo(d);d.css({top:g,left:k})}function c(a){return a.height()+parseInt(a.css("padding-top"))+parseInt(a.css("padding-bottom"))}function e(a){return a.width()+parseInt(a.css("padding-left"))+parseInt(a.css("padding-right"))}var b=a(this),d=a("<div>").addClass("minihint").hide();d.appendTo("body");
b.attr("data-hint-class")&&d.addClass(b.attr("data-hint-class"));a(window).load(function(){f();"true"==b.attr("data-hint-permanent")?(d.show(),a(window).resize(function(){f()}),a(document).change(function(){f()})):b.hover(function(){f();d.stop().css({display:"block",opacity:0}).animate({opacity:1})},function(){d.stop().animate({opacity:0},function(){a(this).hide()})})})})}})(jQuery);
(function(a){a.fn.miniMobileMenu=function(f){return this.each(function(){function f(b,c,e){665>a(window).width()?(b.hide(),e.show()):(b.show(),c.hide(),e.text("\u2630").hide())}if(0<a(this).find(".menu").length){var c=a(this).find(".menu").first(),e=c.clone().hide().addClass("minimobilemenu").appendTo("body"),b=a("<div>").text("\u2630").addClass("minimobilemenu_btn").appendTo("body").click(function(){"none"==e.css("display")?(e.css({top:"-100%"}).show().animate({top:0}),a(this).hide().html("&times;").fadeIn()):
(e.animate({top:"-100%"},function(){e.hide()}),a(this).hide().text("\u2630").fadeIn())});e.find("a").click(function(){var b=a(this).attr("href");b!=document.location.href&&a("body").fadeOut();e.animate({top:"100%"},function(){b!=document.location.href&&(document.location.href=b)});return!1});f(c,e,b);a(window).resize(function(){f(c,e,b)})}})}})(jQuery);
(function(a){a.fn.miniSwipe=function(f){var g=a.extend({swipeUp:function(){},swipeRight:function(){},swipeBottom:function(){},swipeLeft:function(){}},f);return this.each(function(){var c,e;a(this).on("touchstart",function(a){c=a.originalEvent.targetTouches[0].screenX;e=a.originalEvent.targetTouches[0].screenY});a(this).on("touchmove",function(a){a.preventDefault()});a(this).on("touchend",function(a){var d=a.originalEvent.changedTouches[0].screenX-c;a=a.originalEvent.changedTouches[0].screenY-e;Math.abs(a)>
Math.abs(d)?0<a?g.swipeDown.call(this):0>a&&g.swipeUp.call(this):0<d?g.swipeRight.call(this):0>d&&g.swipeLeft.call(this)})})}})(jQuery);